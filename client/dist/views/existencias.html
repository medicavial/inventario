<md-whiteframe class="md-whiteframe-z2 white" layout="column" layout-padding>

    <md-container layout-margin layout="row">
      <md-input-container md-no-float flex class="no-padding">
        <md-icon>
          <ng-md-icon icon="search" style="fill:#3F51B5"></ng-md-icon> 
        </md-icon>
        <input ng-model="query" type="text" placeholder="Buscar Item" flex>
      </md-input-container>
      <md-button class="md-icon-button" aria-label="limpiar" ng-show="query" ng-click="query = ''">
        <ng-md-icon icon="close" style="fill:#3F51B5"></ng-md-icon> 
      </md-button>
    </md-container>
    
    <section ng-repeat="almacen in existencias.info">
      <md-subheader class="md-primary md-no-sticky">{{almacen.almacen}}</md-subheader>
      <md-list layout-padding>

        <md-list-item class="md-3-line" ng-if="almacen.existencias.length == 0">
            Sin Items registrados
        </md-list-item>

        <md-list-item class="md-3-line" ng-repeat="item in almacen.existencias |filter:query" ng-if="almacen.existencias.length > 0">
            <md-icon>
              <ng-md-icon icon="keyboard_arrow_right" style="fill:#3F51B5"></ng-md-icon> 
            </md-icon>
            <div class="md-list-item-text">
              <h3>{{item.ITE_nombre}}</h3>
              <h4>Existentes : {{item.EXI_cantidad}}</h4>
              <p>
                Ultima Modificacion:{{item.updated_at}}
              </p>  
            </div>
            <md-icon class="md-primary" ng-click="existencias.traspasar($event,almacen.clave,item)" aria-label="Traspasar Item">
              <md-tooltip md-direction="top">
                Traspasar
              </md-tooltip>
              <ng-md-icon icon="cached" style="fill:#3F51B5"></ng-md-icon> 
            </md-icon>
        </md-list-item>
      </md-list>
    </section>
    
</md-whiteframe class="md-whiteframe-z2">
